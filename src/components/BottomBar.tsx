import Link from "next/link";
import { useBoundStore } from "~/hooks/useBoundStore";

type BottomBarItem = {
  name: Tab;
  href: string;
  icon: JSX.Element;
};

export type Tab = "홈" | "튜토리얼" | "챌린지" | "리워드" | "마이페이지";

export const useBottomBarItems = () => {
  const loggedIn = useBoundStore((x) => x.loggedIn);

  const bottomBarItems: BottomBarItem[] = [
    {
      name: "홈",
      href: "/home",
      icon: (
        <svg
          width="32"
          height="32"
          viewBox="0 0 32 32"
          fill="none"
          className="h-[50px] w-[50px]"
        >
          <path
            d="M24.5852 25.2658C24.2883 26.8243 22.9257 27.9519 21.3392 27.9519H10.6401C9.05354 27.9519 7.69094 26.8243 7.39408 25.2658L4.98096 12.5969L15.9001 4.52225L26.9988 12.5941L24.5852 25.2658Z"
            fill="#FFC800"
          />
          <path
            opacity="0.5"
            fillRule="evenodd"
            clipRule="evenodd"
            d="M13.1558 23.1111C13.1558 22.522 13.6333 22.0444 14.2224 22.0444H18.4891C19.0782 22.0444 19.5558 22.522 19.5558 23.1111C19.5558 23.7002 19.0782 24.1778 18.4891 24.1778H14.2224C13.6333 24.1778 13.1558 23.7002 13.1558 23.1111Z"
            fill="#945151"
          />
          <path
            d="M19.4785 16.2998C19.4785 18.2208 17.9212 19.778 16.0002 19.778C14.0792 19.778 12.522 18.2208 12.522 16.2998C12.522 14.3788 14.0792 12.8215 16.0002 12.8215C17.9212 12.8215 19.4785 14.3788 19.4785 16.2998Z"
            fill="#945151"
          />
          <path
            d="M16.1685 2.84462C16.6431 2.84231 17.1233 2.98589 17.5361 3.28558L17.5368 3.2861L29.9455 12.2319C30.9781 12.9822 31.207 14.4275 30.4568 15.4601C29.7067 16.4924 28.262 16.7215 27.2294 15.9719L27.2286 15.9714L16.1602 7.99185L5.09208 15.9712L5.09121 15.9719C4.05865 16.7213 2.61395 16.4923 1.86391 15.4599C1.11367 14.4273 1.34258 12.982 2.3752 12.2318L2.37679 12.2306L14.7839 3.28596L14.7846 3.28544C15.2022 2.98229 15.6887 2.83889 16.1685 2.84462Z"
            fill="#FF4B4B"
          />
        </svg>
      ),
    },
    {
      name: "튜토리얼",
      href: "/tutorial",
      icon: (
        <svg
          width="32"
          height="32"
          viewBox="0 0 32 32"
          fill="none"
          className="h-[50px] w-[50px]"
        >
          <path
            d="M12.814 17.4377L18.8385 13.9595"
            stroke="#AFAFAF"
            stroke-width="2.08696"
          />
          <path
            d="M20.875 6.35746C20.0105 4.86019 18.096 4.34719 16.5987 5.21164C15.1015 6.07608 14.5885 7.99063 15.4529 9.48789L21.366 19.7296C22.2304 21.2268 24.1449 21.7398 25.6422 20.8754C27.1395 20.011 27.6525 18.0964 26.788 16.5991L20.875 6.35746Z"
            fill="#1CB0F6"
          />
          <path
            d="M10.6343 12.2705C9.76982 10.7733 7.85527 10.2603 6.35801 11.1247C4.86075 11.9892 4.34774 13.9037 5.21219 15.401L11.1252 25.6427C11.9897 27.1399 13.9042 27.6529 15.4015 26.7885C16.8988 25.924 17.4118 24.0095 16.5473 22.5122L10.6343 12.2705Z"
            fill="#1CB0F6"
          />
          <path
            d="M26.4839 6.33255C25.6194 4.83529 23.7049 4.32229 22.2076 5.18674C20.7104 6.05118 20.1974 7.96573 21.0618 9.46299L24.1922 14.8851C25.0567 16.3823 26.9712 16.8953 28.4685 16.0309C29.9658 15.1664 30.4788 13.2519 29.6143 11.7546L26.4839 6.33255Z"
            fill="#1CB0F6"
          />
          <path
            d="M7.80809 17.1153C6.94364 15.618 5.0291 15.105 3.53184 15.9695C2.03457 16.8339 1.52157 18.7484 2.38602 20.2457L5.51645 25.6678C6.3809 27.165 8.29544 27.678 9.79271 26.8136C11.29 25.9491 11.803 24.0346 10.9385 22.5373L7.80809 17.1153Z"
            fill="#1CB0F6"
          />
          <path
            opacity="0.3"
            d="M5.93212 18.0902C5.64398 17.5911 5.00579 17.4201 4.50671 17.7082C4.00762 17.9964 3.83662 18.6346 4.12477 19.1337L4.82042 20.3386C5.10857 20.8377 5.74675 21.0087 6.24584 20.7205C6.74492 20.4324 6.91592 19.7942 6.62778 19.2951L5.93212 18.0902Z"
            fill="white"
          />
          <path
            opacity="0.3"
            d="M25.4106 7.65561C25.1225 7.15652 24.4843 6.98552 23.9852 7.27367C23.4861 7.56182 23.3151 8.2 23.6033 8.69909L24.2989 9.90399C24.5871 10.4031 25.2253 10.5741 25.7244 10.2859C26.2234 9.99778 26.3944 9.3596 26.1063 8.86052L25.4106 7.65561Z"
            fill="white"
          />
          <path
            opacity="0.3"
            d="M8.71484 13.2206C8.42669 12.7215 7.78851 12.5505 7.28942 12.8386C6.79033 13.1268 6.61933 13.7649 6.90748 14.264L7.95096 16.0714C8.23911 16.5705 8.87729 16.7415 9.37638 16.4533C9.87547 16.1652 10.0465 15.527 9.75832 15.0279L8.71484 13.2206Z"
            fill="white"
          />
          <path
            opacity="0.3"
            d="M19.1499 7.65561C18.8617 7.15652 18.2236 6.98552 17.7245 7.27367C17.2254 7.56182 17.0544 8.2 17.3425 8.69909L18.386 10.5064C18.6742 11.0055 19.3123 11.1765 19.8114 10.8884C20.3105 10.6002 20.4815 9.96206 20.1934 9.46297L19.1499 7.65561Z"
            fill="white"
          />
          <rect
            x="22"
            y="1"
            width="9"
            height="9"
            rx="4.5"
            fill="#FF4B4B"
            stroke="white"
            stroke-width="2"
          />
        </svg>
      ),
    },
    {
      name: "챌린지",
      href: "/challenge",
      icon: (
        <svg
          width="32"
          height="32"
          viewBox="0 0 32 32"
          fill="none"
          className="h-[50px] w-[50px]"
        >
          <image href="challenge.svg" width="32" height="32" />
        </svg>
      ),
    },
    {
      name: "리워드",
      href: "/reward",
      icon: (
        <svg
          width="46"
          height="46"
          viewBox="0 0 46 46"
          fill="none"
          className="h-[50px] w-[50px]"
        >
          <path
            d="M7 9.5C7 7.84314 8.34315 6.5 10 6.5H36C37.6569 6.5 39 7.84315 39 9.5V23.5C39 32.3366 31.8366 39.5 23 39.5C14.1634 39.5 7 32.3366 7 23.5V9.5Z"
            fill="#FEC701"
          />
          <path
            opacity="0.3"
            d="M39.0001 13.3455V9.5C39.0001 7.84315 37.657 6.5 36.0001 6.5H31.5706L8.30957 29.8497C9.68623 33.0304 12.0656 35.6759 15.0491 37.3877L39.0001 13.3455Z"
            fill="white"
          />
        </svg>
      ),
    },
    {
      name: "마이페이지",
      href: loggedIn ? "/mypage" : "/",
      icon: (
        <svg
          width="46"
          height="46"
          viewBox="0 0 46 46"
          fill="none"
          className="h-[50px] w-[50px]"
        >
          <path
            fillRule="evenodd"
            clipRule="evenodd"
            d="M23.1826 5.00195C14.3461 5.00195 7.18262 12.1654 7.18262 21.002V21.9375C4.21918 23.4102 2.18262 26.4682 2.18262 30.002C2.18262 34.9725 6.21206 39.002 11.1826 39.002H35.1826C40.1532 39.002 44.1826 34.9725 44.1826 30.002C44.1826 26.4682 42.1461 23.4102 39.1826 21.9375V21.002C39.1826 12.1654 32.0192 5.00195 23.1826 5.00195Z"
            fill="#9069CD"
          />
          <path
            d="M11.1826 21.002C11.1826 14.3745 16.5552 9.00195 23.1826 9.00195C29.81 9.00195 35.1826 14.3745 35.1826 21.002V29.002C35.1826 35.6294 29.81 41.002 23.1826 41.002C16.5552 41.002 11.1826 35.6294 11.1826 29.002V21.002Z"
            fill="#F3AD6D"
          />
          <path
            d="M7.18262 24.502C7.18262 22.0167 9.19734 20.002 11.6826 20.002H34.6826C37.1679 20.002 39.1826 22.0167 39.1826 24.502C39.1826 26.9872 37.1679 29.002 34.6826 29.002H11.6826C9.19734 29.002 7.18262 26.9872 7.18262 24.502Z"
            fill="#F3AD6D"
          />
          <path
            d="M18.1826 20.502C18.1826 19.6735 18.8542 19.002 19.6826 19.002C20.511 19.002 21.1826 19.6735 21.1826 20.502V24.502C21.1826 25.3304 20.511 26.002 19.6826 26.002C18.8542 26.002 18.1826 25.3304 18.1826 24.502V20.502Z"
            fill="#BF8034"
          />
          <path
            d="M24.1826 20.502C24.1826 19.6735 24.8542 19.002 25.6826 19.002C26.511 19.002 27.1826 19.6735 27.1826 20.502V24.502C27.1826 25.3304 26.511 26.002 25.6826 26.002C24.8542 26.002 24.1826 25.3304 24.1826 24.502V20.502Z"
            fill="#BF8034"
          />
          <path
            d="M17.1826 29.0445C17.1826 28.4687 17.6494 28.002 18.2252 28.002H27.1401C27.7159 28.002 28.1826 28.4687 28.1826 29.0445V29.502C28.1826 32.5395 25.7202 35.002 22.6826 35.002C19.6451 35.002 17.1826 32.5395 17.1826 29.502V29.0445Z"
            fill="white"
          />
          <path
            d="M7.18262 21.0062V21.002C7.18262 12.1654 14.3461 5.00195 23.1826 5.00195C26.0199 5.00195 28.6847 5.74049 30.9953 7.0358C29.7326 15.5 22.2386 22.002 13.1826 22.002C11.0788 22.002 9.05929 21.6511 7.18262 21.0062Z"
            fill="#9069CD"
          />
        </svg>
      ),
    },
  ];
  return bottomBarItems;
};

export const BottomBar = ({ selectedTab }: { selectedTab: Tab | null }) => {
  const bottomBarItems = useBottomBarItems();
  return (
    <nav className="fixed bottom-0 left-0 right-0 z-20 border-t-2 border-[#e5e5e5] bg-white md:hidden">
      <ul className="flex h-[88px]">
        {bottomBarItems.map((item) => {
          return (
            <li
              key={item.href}
              className="flex flex-1 items-center justify-center"
            >
              <Link
                href={item.href}
                className={
                  item.name === selectedTab
                    ? "rounded-xl border-2 border-[#84d8ff] bg-[#ddf4ff] px-2 py-1"
                    : "px-2 py-1"
                }
              >
                {item.icon}
                <span className="sr-only">{item.name}</span>
              </Link>
            </li>
          );
        })}
      </ul>
    </nav>
  );
};
